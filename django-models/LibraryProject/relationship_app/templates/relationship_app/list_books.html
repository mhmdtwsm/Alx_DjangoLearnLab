<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>List of Books</title>
    <style>
        body { font-family: sans-serif; margin: 20px; background-color: #f4f4f4; color: #333; }
        h1 { color: #0056b3; }
        ul { list-style-type: none; padding: 0; }
        li { background-color: #fff; border: 1px solid #ddd; margin-bottom: 5px; padding: 10px; border-radius: 5px; }
        .nav-links a { margin-right: 15px; text-decoration: none; color: #007bff; }
        .nav-links a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="nav-links">
        <a href="{% url 'list_books' %}">All Books</a> |
        <a href="{% url 'register' %}">Register</a> |
        {% if user.is_authenticated %}
            <a href="{% url 'logout' %}">Logout ({{ user.username }})</a> |
            {% if user.userprofile.role == 'Admin' %}<a href="{% url 'admin_dashboard' %}">Admin Dashboard</a> |{% endif %}
            {% if user.userprofile.role == 'Librarian' %}<a href="{% url 'librarian_dashboard' %}">Librarian Dashboard</a> |{% endif %}
            {% if user.userprofile.role == 'Member' %}<a href="{% url 'member_dashboard' %}">Member Dashboard</a> |{% endif %}
            <a href="{% url 'add_book' %}">Add Book</a>
        {% else %}
            <a href="{% url 'login' %}">Login</a>
        {% endif %}
    </div>
    <h1>Books Available:</h1>
    <ul>
        {% for book in books %}
        <li>
            {{ book.title }} by {{ book.author.name }} (Published {{ book.publication_year }})
            {% if user.is_authenticated and user.has_perm 'relationship_app.can_change_book' %}
                <a href="{% url 'edit_book' book.pk %}" style="margin-left: 10px; color: green;">Edit</a>
            {% endif %}
            {% if user.is_authenticated and user.has_perm 'relationship_app.can_delete_book' %}
                <a href="{% url 'delete_book' book.pk %}" style="color: red;">Delete</a>
            {% endif %}
        </li>
        {% empty %}
        <li>No books found.</li>
        {% endfor %}
    </ul>
</body>
</html>
